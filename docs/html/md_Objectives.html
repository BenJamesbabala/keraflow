<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>Keraflow: Objectives</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Keraflow
   </div>
   <div id="projectbrief">Deep Learning for Python.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Packages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('md_Objectives.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Objectives </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#usage_of_objectives">Usage of Objectives</a></li>
<li class="level1"><a href="#available_objectives">Available Objectives</a></li>
</ul>
</div>
<div class="textblock"><h1><a class="anchor" id="usage_of_objectives"></a>
Usage of Objectives</h1>
<p>An objective function is used to measure how bad (or good) the model is. Concretely, objective functions measures how "far" (or "close") between the model's output and the gold answer. Based on the objective function, the model adjusts its parameters to minimize (or maximize) the score returned by the objective function. Usually, we use the name "loss function" when it is to be minimized.</p>
<p>Model's <a class="el" href="classkeraflow_1_1models_1_1Model.html#aebe458039ef29e1d9b75ece6bdeec7b4">fit function</a> requires one (or more, for multi-output models) loss function for the <code>loss</code> argument so that the model can minimize it. Additionally, you could monitor one additional objective function value for each output channel by the <code>metric</code> argument. Concretely:</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;input1 = Input(1, name=<span class="stringliteral">&#39;input1&#39;</span>)</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;input2 = Input(1, name=<span class="stringliteral">&#39;input2&#39;</span>)</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;output1 = Dense(1, name=<span class="stringliteral">&#39;output1&#39;</span>)(input1)</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;output2 = Dense(1, name=<span class="stringliteral">&#39;output2&#39;</span>)(input2)</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;</div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;model = Model([input1, input2], [output1,output2])</div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;model.compile(<span class="stringliteral">&#39;sgd&#39;</span>, loss={<span class="stringliteral">&#39;output1&#39;</span>:<span class="stringliteral">&#39;mse&#39;</span>, <span class="stringliteral">&#39;output2&#39;</span>:<span class="stringliteral">&#39;mse&#39;</span>}, metrics={<span class="stringliteral">&#39;output1&#39;</span>:<span class="stringliteral">&#39;acc&#39;</span>})</div>
</div><!-- fragment --><p>Note that you must provide one objective function for each output channel, while you could skip some (or all) output channels for <code>metric</code>. Also note that the key to refer an output channel is bound to the name of the outputting layer of that channel.</p>
<p>Note that <code>mse</code> stands for <code>squared_error</code> and <code>acc</code> stands for <code>acuracy</code>. Keraflow uses alias for some build-in objective functions (see below). You could either use the full name or the alias name. Alternatively, You can also pass a Theano/TensorFlow function to the <code>loss</code> argument:</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="keyword">from</span> keraflow <span class="keyword">import</span> backend <span class="keyword">as</span> B</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="keyword">def </span>absolute_error(y_pred, y_true):</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;    <span class="keywordflow">return</span> B.abs(y_pred - y_true)</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;</div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;model.compile(<span class="stringliteral">&#39;sgd&#39;</span>, loss={<span class="stringliteral">&#39;output1&#39;</span>:<span class="stringliteral">&#39;mse&#39;</span>, <span class="stringliteral">&#39;output2&#39;</span>:absolute_error}, metrics={<span class="stringliteral">&#39;output1&#39;</span>:<span class="stringliteral">&#39;acc&#39;</span>, <span class="stringliteral">&#39;output2&#39;</span>:absolute_error})</div>
</div><!-- fragment --><p>Note that the function must take two arguments:</p>
<ol type="1">
<li><code>y_true</code>: True labels. 2D (or more) Theano/TensorFlow tensor</li>
<li><code>y_pred</code>: Theano/TensorFlow tensor of the same shape as <code>y_true</code>.</li>
</ol>
<p>The first dimension of the input tensor is the sample dimension. The function should not average over samples since it is done by Keraflow later. Therefore, the function must return an 2D (or more) tensor with the first dimension the sample dimension.</p>
<p>In addition to dict, you could also pass a list to <code>loss</code> &amp; <code>metric</code>:</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;model = Sequential([Input(1), Dense(1)])</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;model.compile(<span class="stringliteral">&#39;sgd&#39;</span>, loss=[<span class="stringliteral">&#39;mse&#39;</span>, absolute_error], metrics=[<span class="stringliteral">&#39;acc&#39;</span>])</div>
</div><!-- fragment --><p>You could only specify metrics for partial output channels. For the dict method, just specify the target output names. For the list method, we use the first come first serve strategy, i.e. <code>["acc"]</code> will only specify accuracy metric for <code>output1</code>.</p>
<h1><a class="anchor" id="available_objectives"></a>
Available Objectives</h1>
<ul>
<li><a class="el" href="namespacekeraflow_1_1objectives.html#ae4345b48a43671d2ec5ee6a036512e0c">square_error/se/mse</a></li>
<li><a class="el" href="namespacekeraflow_1_1objectives.html#a6a2e295fd064050f352e6ed9d2f5a01e">absolute_error/ae/mae</a></li>
<li><a class="el" href="namespacekeraflow_1_1objectives.html#a26cd9f0cff6df5b0421b421cd7cb114d">absolute_percentage_error/ape/mape</a></li>
<li><a class="el" href="namespacekeraflow_1_1objectives.html#a088d68195e270b1545cdeeee5395c9a3">squared_logarithmic_error/sle/msle</a></li>
<li><a class="el" href="namespacekeraflow_1_1objectives.html#ae95eb0e22bc375afe3c3f744ae45331b">hinge</a></li>
<li><a class="el" href="namespacekeraflow_1_1objectives.html#a87e6015f237d60dd3f77f2ca433411c0">squared_hinge</a></li>
<li><a class="el" href="namespacekeraflow_1_1objectives.html#a6e68a0b604d90c60e59e6addc9bd623f">binary_crossentropy</a></li>
<li><a class="el" href="namespacekeraflow_1_1objectives.html#a16fe4417aff941efbf6ce1333acbbe6b">categorical_crossentropy</a></li>
<li><a class="el" href="namespacekeraflow_1_1objectives.html#ae0901a7a62988478cc95d4794059300f">kullback_leibler_divergence</a></li>
<li><a class="el" href="namespacekeraflow_1_1objectives.html#a8b77105d9b6ce2cad07c37dd69a8ed13">poisson</a></li>
<li><a class="el" href="namespacekeraflow_1_1objectives.html#ad5d479359b3a1261bfc34ceacbc88afd">cosine_proximity</a></li>
</ul>
<dl class="section note"><dt>Note</dt><dd>For the alias of <code>m*</code>, <code>m</code> stands for mean (over sample points). As said, Keraflow objective function does not average over sample points, so the name of the function does not contain <code>mean</code>. However, to follow machine learning convention, we still provide alias starting with <code>m</code>. </dd></dl>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Tue Sep 6 2016 08:44:57 for Keraflow by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
